<!DOCTYPE html>
<html lang="en-uk">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 2.4.0">
  <meta name="generator" content="Hugo 0.47.1" />
  <meta name="author" content="Martin Jung">

  
  
  
  
    
  
  <meta name="description" content="In this new post I will go through my process of getting familiar with running R in the Google cloud and the posting sort of follows my previous post on getting started with the Google cloud. My dream setup would include to being able to switch seamless between running r code locally or in the cloud whenever I require more processing power. For instance similar doAzureParallel package available for Microsoft Azure.">

  
  <link rel="alternate" hreflang="en-uk" href="http://martin-jung.github.io/post/2018_datascienceingooglecloud_nr2/">

  


  

  
  
  
  <meta name="theme-color" content="#4caf50">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai.min.css" crossorigin="anonymous">
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="anonymous">
    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  

  <link rel="stylesheet" href="../../styles.css">
  
  <link rel="stylesheet" href="../../css/custom.css">
  

  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-118877355-1', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  
  <link rel="alternate" href="http://martin-jung.github.io/index.xml" type="application/rss+xml" title="Martin Jung - Environmental and data scientist">
  <link rel="feed" href="http://martin-jung.github.io/index.xml" type="application/rss+xml" title="Martin Jung - Environmental and data scientist">
  

  <link rel="manifest" href="../../site.webmanifest">
  <link rel="icon" type="image/png" href="../../img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="../../img/icon-192.png">

  <link rel="canonical" href="http://martin-jung.github.io/post/2018_datascienceingooglecloud_nr2/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@Martin_Ecology">
  <meta property="twitter:creator" content="@Martin_Ecology">
  
  <meta property="og:site_name" content="Martin Jung - Environmental and data scientist">
  <meta property="og:url" content="http://martin-jung.github.io/post/2018_datascienceingooglecloud_nr2/">
  <meta property="og:title" content="Running rstudio in the Google cloud - [2] | Martin Jung - Environmental and data scientist">
  <meta property="og:description" content="In this new post I will go through my process of getting familiar with running R in the Google cloud and the posting sort of follows my previous post on getting started with the Google cloud. My dream setup would include to being able to switch seamless between running r code locally or in the cloud whenever I require more processing power. For instance similar doAzureParallel package available for Microsoft Azure."><meta property="og:image" content="http://martin-jung.github.io/img/posts/GoogleRstudio.png">
  <meta property="og:locale" content="en-uk">
  
  <meta property="article:published_time" content="2018-08-20T00:00:00&#43;01:00">
  
  <meta property="article:modified_time" content="2018-08-20T00:00:00&#43;01:00">
  

  

  <!DOCTYPE html>


<title>Running rstudio in the Google cloud - [2] - Martin Jung - Environmental and data scientist</title>
<meta property="og:title" content="Running rstudio in the Google cloud - [2] - Martin Jung - Environmental and data scientist">
<meta property="og:type" content="article">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://raw.githubusercontent.com/seabbs/seabbs.github.io/sources/static/img/laptop.png" >
  


<meta property="description" content="Article posted by %!s(&lt;nil&gt;), on Monday, August 20nd, 2018">
<meta property="og:description" content="Article posted by %!s(&lt;nil&gt;), on Monday, August 20nd, 2018">


<meta name="twitter:creator" content="">
<meta name="twitter:site" content="">


  <title>Running rstudio in the Google cloud - [2] | Martin Jung - Environmental and data scientist</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="../../"><img src="../../img/laptop.png" alt="Martin Jung - Environmental and data scientist"></a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-left">
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="../../#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="../../#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="../../#publications">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="../../#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="../../#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  
<div class="article-header">
  
  
    <img src="../../img/posts/GoogleRstudio.png" class="article-banner" itemprop="image">
  

  <span class="article-header-caption">Rstudio and Google cloud engine</span>
</div>



  <div class="article-container">
    <h1 itemprop="name">Running rstudio in the Google cloud - [2]</h1>

    

<div class="article-metadata">

  
  
  <span itemscope itemprop="author" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Martin Jung">
  </span>
  

  <span class="article-date">
    
    <meta content="2018-08-20 00:00:00 &#43;0100 BST" itemprop="datePublished">
    <time datetime="2018-08-20 00:00:00 &#43;0100 BST" itemprop="dateModified">
      2018 Aug 20
    </time>
  </span>
  <span itemscope itemprop="publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Martin Jung">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    3 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="http://martin-jung.github.io/post/2018_datascienceingooglecloud_nr2/#disqus_thread"></a>
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="http://martin-jung.github.io/categories/data-science/">data-science</a>, 
    
    <a href="http://martin-jung.github.io/categories/cloud-computing/">cloud-computing</a>
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Running%20rstudio%20in%20the%20Google%20cloud%20-%20%5b2%5d&amp;url=http%3a%2f%2fmartin-jung.github.io%2fpost%2f2018_datascienceingooglecloud_nr2%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=http%3a%2f%2fmartin-jung.github.io%2fpost%2f2018_datascienceingooglecloud_nr2%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2fmartin-jung.github.io%2fpost%2f2018_datascienceingooglecloud_nr2%2f&amp;title=Running%20rstudio%20in%20the%20Google%20cloud%20-%20%5b2%5d"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=http%3a%2f%2fmartin-jung.github.io%2fpost%2f2018_datascienceingooglecloud_nr2%2f&amp;title=Running%20rstudio%20in%20the%20Google%20cloud%20-%20%5b2%5d"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Running%20rstudio%20in%20the%20Google%20cloud%20-%20%5b2%5d&amp;body=http%3a%2f%2fmartin-jung.github.io%2fpost%2f2018_datascienceingooglecloud_nr2%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


    <div class="article-style" itemprop="articleBody">
      

<p>In this new post I will go through my process of getting familiar with running <em>R</em> in the Google cloud and the posting sort of follows my previous <a href="http://martin-jung.github.io/post/2018_datascienceingooglecloud/" target="_blank">post</a> on getting started with the Google cloud. My dream setup would include to being able to switch seamless between running r code locally or in the cloud whenever I require more processing power. For instance similar <a href="https://github.com/Azure/doAzureParallel" target="_blank">doAzureParallel</a> package available for Microsoft Azure.
<br>
For Google cloud engine, there also exists a neat package called <a href="https://cloudyr.github.io/googleComputeEngineR/index.html" target="_blank">googleComputeEngineR</a>, that allows to easily setup a virtual machine and run code remotely.
So let&rsquo;s setup the googleComputeEngineR package. As always, please note you alone (the dear reader) is responsible to keep track of your virtual machines in the cloud. If you do not stop them (i.e. shut them down), then this will <span class="markup-quote">cost you money!</span>
<hr>
In order to use the <strong>googleComputeEngineR</strong> package, we first need to create a credentials file. For my google cloud project and personal linux machine I have created such a file on my local system like this:</p>

<pre><code class="language-bash"># Create the file
touch ~/.Renviron
echo &quot;GCE_AUTH_FILE=\&quot;~/wasserdampf.json\&quot;&quot; &gt;&gt; ~/.Renviron
echo &quot;GCE_DEFAULT_PROJECT_ID=\&quot;wolke7-208420\&quot;&quot; &gt;&gt; ~/.Renviron
echo &quot;GCE_DEFAULT_ZONE=\&quot;us-central1-a\&quot;&quot; &gt;&gt; ~/.Renviron
</code></pre>

<p>One also needs a service account auth key (here called wasserdampf.json). Find more information how to get such a key <a href="https://cloudyr.github.io/googleComputeEngineR/articles/installation-and-authentication.html" target="_blank">here</a>.
Now for starters lets start R and install the <strong>googleComputeEngineR</strong> package, then start up a virtual machine with Rstudio setup.</p>

<h2 id="run-a-rstudio-in-the-google-cloud">Run a Rstudio in the google cloud</h2>

<pre><code class="language-R">llibrary(googleAuthR)
library(googleComputeEngineR)
library(future)

# Start up a rstudio vm (or create if not already existing)
vm &lt;- gce_vm(template = &quot;rstudio&quot;,
             name = &quot;rstudio&quot;,
             username = &quot;martin&quot;, password = &quot;wolkenwind&quot;,
             predefined_type = &quot;n1-standard-1&quot; # Available machines via gce_list_machinetype()
)

# See if the vm exists
gce_list_instances()

</code></pre>

<pre><code>&gt; ==Google Compute Engine Instance List==
&gt;      name   machineType  status          zone     externalIP   creationTimestamp
&gt; 1 rstudio n1-standard-1 RUNNING us-central1-a XX.XXX.XXX.XXX 2018-08-23 14:41:45
</code></pre>

<p>The externalIP gives the ip through which rstudio server can be run in any webbrowser
<img src="../../img/posts/GoogleCloud_Rstudio.png" alt="Rstudio run in the google cloud" /></p>

<p>Equally it is quite easy to control the VM via SSH directly in the browser and the <strong>googleComputeEngineR</strong> package provides an easy function to open such a connection:</p>

<pre><code class="language-R">gce_ssh_browser(vm)
</code></pre>

<p>Using the browser ssh interface from google is quite handy, but you won&rsquo;t be able to control your instance within R yet and use all the nifty functions available within the <strong>googleComputeEngineR</strong> package.
Hence, I first used the Google cloud engine <strong>gcloud</strong> tool to setup my public <a href="http://martin-jung.github.io/data/mj-pubkey.asc" target="_blank">gpg-key</a> with Google.</p>

<pre><code class="language-bash">gcloud compute os-login ssh-keys add --key-file ~/mj-pubkey.asc
</code></pre>

<div class="alert alert-note">
  <p>Place holder - I will continue writing the post the next time (23/08/2018)</p>

</div>


<p>Lastly ensure that you stop the VM or delete it all together</p>

<pre><code class="language-R"># Shut down the vm
gce_vm_stop(vm)

# Or delete it all together
gce_vm_delete(vm)
</code></pre>

    </div>

    


<div class="article-tags">
  
  <a class="label label-default" href="http://martin-jung.github.io/tags/cloud-computing/">cloud-computing</a>
  
  <a class="label label-default" href="http://martin-jung.github.io/tags/data/">data</a>
  
  <a class="label label-default" href="http://martin-jung.github.io/tags/r/">r</a>
  
  <a class="label label-default" href="http://martin-jung.github.io/tags/google-cloud/">google-cloud</a>
  
</div>




    
    
    <div class="article-widget">
      <div class="hr-light"></div>
      <h3>Related</h3>
      <ul>
        
        <li><a href="../../post/2018_datascienceingooglecloud/">Data science in the Google cloud - [1]</a></li>
        
        <li><a href="../../post/2018_googleearthengine-intro/">Introduction to Google Earth Engine</a></li>
        
        <li><a href="../../talk/2016_sussexgittalk/">2016 Introducing github at University of Sussex</a></li>
        
        <li><a href="../../project/biofrag/">Biofrag</a></li>
        
      </ul>
    </div>
    

    

    
<section id="comments">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "martinjung" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



  </div>
</article>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      Martin Jung 2017-2018 &bull; <a href="https://creativecommons.org/licenses/by/4.0/"><i class="fa fa-cc" aria-hidden="true"></i></a> &middot; 
      

      <p style="font-size:12px;">
       &bull; <a href="http://martin-jung.github.io/data/mj-pubkey.asc">PGP public <i class="fa fa-key"></i></a> &bull; <br />
       BD4B 2D2C B8E3 A95B 076A
       6FA0 99DC 99BA 1BC8 BC37
      </p>

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>
        
    
    
    
    
      
      
      
        
      
    
    
  
    </p>
  </div>
</footer>

    

    
    
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        CommonHTML: { linebreaks: { automatic: true } },
        tex2jax: { inlineMath: [ ['$', '$'], ['\\(','\\)'] ], displayMath: [ ['$$','$$'], ['\\[', '\\]'] ], processEscapes: false },
        TeX: { noUndefined: { attributes: { mathcolor: 'red', mathbackground: '#FFEEEE', mathsize: '90%' } } },
        messageStyle: 'none'
      });
    </script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    <script src="../../js/hugo-academic.js"></script>
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin="anonymous"></script>
    

    
    
    
    <script id="dsq-count-scr" src="//martinjung.disqus.com/count.js" async></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/search.json";
      const i18n = {
        'placeholder': "Search...",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    <script src="../../js/search.js"></script>
    

    
    

  </body>
</html>

